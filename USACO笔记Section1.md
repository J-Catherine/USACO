## Section 1

### P1203 [USACO1.1]坏掉的项链Broken Necklace

> 一串项链，r、b两种颜色，w可以表示任意一种颜色。假如你要在一些点打破项链,展开成一条直线，然后从一端开始收集同颜色的珠子直到你遇到一个不同的颜色珠子，在另一端做同样的事(颜色可能与在这之前收集的不同)。 确定应该在哪里打破项链来收集到最大数目的珠子。

+ 思路1：枚举断开点

+ 思路2：动归

    $left[2][i] $与$right[2][i]$表示向左和向右找到 红色r/蓝色b 最多分别为多少



### P1209 [USACO1.3]修理牛棚 Barn Repair

> 计算拦住所有有牛的牛棚所需木板的最小总长度

转为 【最小m段问题】

+ 思路1：动归，$d[i][j] $前$i$个分成$j$段 所需要木材的最小值  $O(n^2)$

    $$ d[i][j] = min{d[i-1][j-1]+1, d[i-1][j]+num[i]-num[i-1]}, i>m ​$$

    ​            $$  = d[i-1][j-1] + 1 , i<=m ​$$  即有足够的木板

+ 思路2：贪心，每次选取距离最小的连接  $O(nlgn)​$



### P3650 [USACO1.3]滑雪课程设计Ski Course Design

> 因此,如果他改变山峰的高度（使最高与最低的山峰海拔高度差不超过17）,约翰可以避免支付税收。如果改变一座山x单位的高度成本是x^2单位,约翰最少需要付多少钱

思路1：枚举起点夹逼 $O(n^2)$

思路2：贪心，



### P1444 [USACO1.3]虫洞wormhole

> N个虫洞在农场上（2<=N<=12，n是偶数）,虫洞将形成 N/2 连接配对。例如，如果A和B的虫洞连接成一对，进入虫洞A的任何对象体将从虫洞B出去，朝着同一个方向，而且进入虫洞B的任何对象将同样从虫洞A出去，朝着相同的方向前进。计算不同的虫洞配对（情况），使贝茜可能被困在一个无限循环中，如果她从不幸的位置开始。

思路：虫洞配对（回溯） + 检查是否有环（dfs）

给虫洞配对，对每种配对方式调用checkRing，检查是否有环。检查是否环时，枚举每一点作为出发点，使用visited数组标记每一点是从哪里被访问的。注意：通过虫洞到达和+x到达 是不同的，要分两个数组标记

本题特殊在于，从虫洞走出后只能+x走，不能再走一遍虫洞，即虫洞后一定为+x，+x后一定进入虫洞



### P1215 [USACO1.4]母亲的牛奶 Mother's Milk

> 有三个容量分别是A,B,C升的桶，A,B,C分别是三个从1到20的整数， 最初，A和B桶都是空的，而C桶是装满牛奶的。有时，农民把牛奶从一个桶倒到另一个桶中，直到被灌桶装满或原桶空了。当然每一次灌注都是完全的。
>
> 找出当A桶是空的时候，C桶中牛奶所剩量的所有可能性。

思路：类似回溯

注意：**局部变量**！！





### P1217 [USACO1.5]回文质数 Prime Palindromes

> 因为151既是一个质数又是一个回文数(从左到右和从右到左是看一样的)，所以 151 是回文质数。
>
> 写一个程序来找出范围$[a,b](5 <= a < b <= 100,000,000)$( 一亿)间的所有回文质数;

思路：生成回文数，判断是否质数

**判断质数：**

+ 方法1：枚举判断n能否能被从2到sqrt(n)之间的质数x整除，若不能则为质数。 $O(\sqrt{n})$

    ```go
    prime []int   //所有<sqrt(n)的质数的集合
    func isPrime(n int) int {
    	if n == 1 {
    		return 0
    	}
    	n_sqrt := int(math.Sqrt(float64(n)))
        for _,x := range() {
    		if n%x == 0 {
    			return 0
    		}
    	}
    	return 1
    }
    ```

+ 方法二：Miller-Rabin 素性检验  $O(k*logn^2)​$ , k 为重复次数，一般次数<20

    

生成回文数可优化-但复杂度没有变化



### P1218 [USACO1.5]特殊的质数肋骨 Superprime Rib

> 7 3 3 1 全部肋骨上的数字 7331是质数;三根肋骨 733是质数;二根肋骨 73 是质数;当然,最后一根肋骨 7 也是质数。 7331 被叫做长度 4 的特殊质数。写一个程序对给定的肋骨的数目 N (1<=N<=8),求出所有的特殊质数。数字1不被看作一个质数。

+ 思路1：从低位至高位判断是否质数——过不了 
+ 思路2：从高位至低位判断质数。$v=v*10+ 2,3,5,7$





## Section2

### P1457 [USACO2.1]城堡 The Castle

### P1458 [USACO2.1]顺序的分数 Ordered Fractions

> 输入一个自然数N,对于一个最简分数a/b（分子和分母互质的分数），满足1<=b<=N，0<=a/b<=1。给定一个自然数N，1<=n<=160，按分数值递增的顺序输出所有解。

+ 思路1：维护一个大小为N的堆，n个数分母分别为1-n，每次弹出堆中最小的数（x/y），加入和这个数相同分母、分子+1（ (x+1)/y ），继续维护这个堆。 复杂度：$O(N^2 logN)​$